(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class l{constructor(){this.data=null,this.activeWalletId=null,this.init()}async init(){try{await this.loadData(),this.renderWalletButtons(),this.setActiveWallet(this.data.activeWalletId||this.data.wallets[0].id)}catch(t){console.error("Error loading portfolio data:",t)}}async loadData(t=3){for(let e=0;e<t;e++)try{const n=await fetch("./assets/data/portfolio-data.json");if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);this.data=await n.json();return}catch(n){if(e===t-1)throw n;await new Promise(s=>setTimeout(s,1e3*(e+1)))}}renderWalletButtons(){const t=document.querySelector(".wallet-selection");if(!t){console.error("Wallet selection container not found");return}t.innerHTML="";const e=document.createDocumentFragment();this.data.wallets.forEach(n=>{const s=this.createWalletButton(n);e.appendChild(s)}),t.appendChild(e)}createWalletButton(t){const e=document.createElement("button");return e.className="btn btn-outline-dark rounded-pill px-4",e.textContent=t.name,e.setAttribute("data-wallet-id",t.id),e.setAttribute("aria-pressed","false"),e.setAttribute("aria-label",`Выбрать ${t.name}`),e.addEventListener("click",()=>this.setActiveWallet(t.id)),e}setActiveWallet(t){const e=this.data.wallets.find(n=>n.id===t);e&&(this.activeWalletId=t,this.updateWalletButtons(t),this.updatePortfolioData(e))}updateWalletButtons(t){document.querySelectorAll(".wallet-selection button").forEach(n=>{const o=parseInt(n.getAttribute("data-wallet-id"))===t;n.className=o?"btn btn-dark rounded-pill px-4":"btn btn-outline-dark rounded-pill px-4",n.setAttribute("aria-pressed",o.toString())})}updatePortfolioData(t){this.updateElement(".portfolio-value",t.capital),this.updateElement(".chart-value",t.capital),this.updateElement('[data-stat="portfolio"] .stat-value',t.capital),this.updateElement('[data-stat="winrate"] .stat-value',t.winRate),this.updateElement('[data-stat="annual-return"] .stat-value',t.annualReturn),this.updateChartSubtitle(t.yearlyReturn),this.updateAssetsList(t.assets),this.updateCircularChart(t.assets),this.updateChartImages(t)}updateElement(t,e){const n=document.querySelector(t);n&&(n.textContent=e)}updateChartSubtitle(t){const e=document.querySelector(".chart-subtitle");e&&(e.innerHTML=`^${t} доходности<br>за последний год`)}updateAssetsList(t){const e=document.querySelector(".assets-list");if(!e)return;e.querySelectorAll(".asset-item").forEach(s=>s.remove()),t.forEach(s=>{const o=document.createElement("div");o.className="asset-item d-flex align-items-center justify-content-between mb-2 py-2";const r=this.getAssetIconClass(s.name),i=this.createAssetIcon(s);o.innerHTML=`
                <div class="d-flex align-items-center">
                    <div class="asset-icon ${r} rounded-circle d-flex align-items-center justify-content-center me-2">
                        ${i}
                    </div>
                    <span class="text-dark">${s.name} - ${s.percentage}%</span>
                </div>
            `,e.appendChild(o)})}createAssetIcon(t){return`<img src="${`./assets/icons/tokenico/${t.icon}.png`}" alt="${t.name}" class="asset-icon-img" style="width: 16px; height: 16px; object-fit: contain;" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
                <span class="text-white small fw-bold" style="display: none;">${t.name.charAt(0)}</span>`}getAssetIconClass(t){return{USDT:"bg-success",Bitcoin:"bg-warning",ETH:"bg-primary",AVAX:"bg-danger"}[t]||"bg-secondary"}updateCircularChart(t){const e=document.querySelector(".chart-segment");if(!e)return;let n=0;const s=t.map(o=>{const r=n*3.6;n+=o.percentage;const i=n*3.6;return`${this.getAssetColor(o.name)} ${r}deg ${i}deg`}).join(", ");e.style.background=`conic-gradient(${s})`}getAssetColor(t){return{USDT:"#D1F767",Bitcoin:"#E8A005",ETH:"#FF5343",AVAX:"#627EEA"}[t]||"#6c757d"}updateChartImages(t){const e=document.querySelector('.chart-container img[alt="Portfolio Change Chart"]');e&&(e.src=t.portfolioChart);const n=document.querySelector('.chart-container img[alt="Sharpe Ratio Chart"]');n&&(n.src=t.sharpeChart)}}class d{constructor(){this.init()}init(){this.setupIntersectionObserver(),this.setupSmoothScrolling()}setupIntersectionObserver(){if(!("IntersectionObserver"in window)){console.warn("IntersectionObserver not supported, falling back to scroll events"),this.setupScrollFallback();return}const t={root:null,rootMargin:"0px 0px -50px 0px",threshold:.1},e=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting&&(o.target.classList.add("scroll-show"),o.target.classList.remove("scroll-hidden"))})},t);document.querySelectorAll(".scroll-hidden").forEach(s=>{e.observe(s)})}setupSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",n=>{const s=e.getAttribute("href");if(s==="#")return;const o=document.querySelector(s);if(o){n.preventDefault();const c=o.getBoundingClientRect().top+window.pageYOffset-80;window.scrollTo({top:c,behavior:"smooth"})}})})}setupScrollFallback(){let t=!1;const e=()=>{document.querySelectorAll(".scroll-hidden").forEach(o=>{o.getBoundingClientRect().top<window.innerHeight-150&&(o.classList.add("scroll-show"),o.classList.remove("scroll-hidden"))}),t=!1},n=()=>{t||(requestAnimationFrame(e),t=!0)};window.addEventListener("scroll",n),e()}triggerAnimation(t){const e=document.querySelector(t);e&&(e.classList.add("scroll-show"),e.classList.remove("scroll-hidden"))}resetAnimation(t){const e=document.querySelector(t);e&&(e.classList.add("scroll-hidden"),e.classList.remove("scroll-show"))}}document.addEventListener("DOMContentLoaded",()=>{new l,new d});
//# sourceMappingURL=index-Bb0sHIBc.js.map
